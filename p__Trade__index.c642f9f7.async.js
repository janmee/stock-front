"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[975],{64220:function(Ae,D,u){u.r(D);var H=u(15009),h=u.n(H),J=u(99289),g=u.n(J),X=u(5574),c=u.n(X),_=u(67294),Y=u(90930),F=u(97289),i=u(8232),p=u(83622),A=u(28248),o=u(2453),q=u(78957),ee=u(96074),te=u(55102),P=u(37804),y=u(78045),M=u(84567),re=u(46496),v=u(2618),e=u(85893),ne=function(){var ae=(0,_.useState)([]),Z=c()(ae,2),ue=Z[0],le=Z[1],ie=(0,_.useState)([]),O=c()(ie,2),I=O[0],b=O[1],se=(0,_.useState)(!1),k=c()(se,2),de=k[0],S=k[1],oe=(0,_.useState)("buy"),B=c()(oe,2),j=B[0],U=B[1],ce=(0,_.useState)(!1),R=c()(ce,2),_e=R[0],w=R[1],me=(0,_.useState)(),V=c()(me,2),x=V[0],K=V[1],he=(0,_.useState)([]),L=c()(he,2),pe=L[0],W=L[1],fe=(0,_.useState)(!1),z=c()(fe,2),ye=z[0],N=z[1],Ee=i.Z.useForm(),ve=c()(Ee,1),T=ve[0],E=(0,_.useRef)(),xe=[{title:"\u725B\u725B\u53F7",dataIndex:"account",width:180},{title:"\u8D26\u6237\u522B\u540D",dataIndex:"name",width:180},{title:"\u53EF\u7528\u8D44\u91D1",dataIndex:"availableAmount",width:180,valueType:{type:"money",locale:"en-US"},hideInSearch:!0},{title:"\u603B\u8D44\u91D1",dataIndex:"totalAmount",width:180,valueType:{type:"money",locale:"en-US"},hideInSearch:!0},{title:"\u8BC1\u5238\u5E02\u503C",dataIndex:"marketVal",width:180,valueType:{type:"money",locale:"en-US"},hideInSearch:!0},{title:"\u6700\u5927\u8D2D\u4E70\u529B",dataIndex:"power",width:180,valueType:{type:"money",locale:"en-US"},hideInSearch:!0},{title:"\u98CE\u9669\u7B49\u7EA7",dataIndex:"riskLevel",width:120,hideInSearch:!0,valueEnum:{"-1":{text:"\u672A\u77E5",status:"Default"},0:{text:"\u5B89\u5168",status:"Success"},1:{text:"\u9884\u8B66",status:"Warning"},2:{text:"\u5371\u9669",status:"Error"},3:{text:"\u7EDD\u5BF9\u5B89\u5168",status:"Success"},4:{text:"\u5371\u9669",status:"Error"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",width:120,fixed:"right",hideInSearch:!0,render:function(r,t){return[(0,e.jsx)(p.ZP,{type:"link",onClick:function(){return Ie(t.account)},children:"\u67E5\u770B\u6301\u4ED3"},"position")]}}],Te=[{title:"\u8D26\u53F7\u540D\u79F0",dataIndex:"accountName",valueType:"textarea",sorter:!0},{title:"\u80A1\u7968\u4EE3\u7801",dataIndex:"code",valueType:"textarea",sorter:!0},{title:"\u8BA2\u5355\u6765\u6E90",dataIndex:"systemType",valueType:"textarea",sorter:!0,hideInSearch:!0},{title:"\u4E70\u5165\u65B9\u5411",dataIndex:"trdSide",valueType:"textarea",hideInSearch:!0,valueEnum:{1:{text:"\u4E70\u5165",status:"Success"},2:{text:"\u5356\u51FA",status:"Error"}}},{title:"\u8BA2\u5355\u7C7B\u578B",dataIndex:"orderType",valueType:"textarea",hideInSearch:!0,valueEnum:{1:{text:"\u9650\u4EF7\u5355"},2:{text:"\u5E02\u4EF7\u5355"}}},{title:"\u8BA2\u5355\u6570\u91CF",dataIndex:"number",valueType:"textarea",hideInSearch:!0},{title:"\u80A1\u7968\u5355\u4EF7",dataIndex:"price",width:100,render:function(r,t){return t.orderType===2?"\u5E02\u4EF7":t.price},hideInSearch:!0},{title:"\u8BA2\u5355\u91D1\u989D",dataIndex:"amount",width:120,hideInSearch:!0,render:function(r,t){return t.orderType===2?"\u5E02\u4EF7":t.amount}},{title:"\u6210\u4EA4\u6570\u91CF",dataIndex:"fillQty",valueType:"textarea",hideInSearch:!0},{title:"\u6210\u4EA4\u5747\u4EF7",dataIndex:"fillAvgPrice",valueType:{type:"money",locale:"en-US"},hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"textarea",hideInSearch:!0,sorter:!0},{title:"\u8BA2\u5355\u72B6\u6001",dataIndex:"status",hideInSearch:!0,sorter:!0,valueEnum:{0:{text:"\u672A\u63D0\u4EA4",status:"Default"},1:{text:"\u5F85\u6267\u884C",status:"Processing"},2:{text:"\u90E8\u5206\u6210\u4EA4",status:"Processing"},3:{text:"\u5168\u90E8\u6210\u4EA4",status:"Success"},4:{text:"\u5DF2\u5931\u6548",status:"Error"},5:{text:"\u5DF2\u64A4\u5355",status:"Warning"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(r,t){var l=Number(t.statusValue),s=l>=1&&l<=10;return s?[(0,e.jsx)(p.ZP,{type:"primary",danger:!0,onClick:function(){return ge(t.orderNo)},children:"\u64A4\u5355"},"cancel")]:null}}],ge=function(){var n=g()(h()().mark(function r(t){return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:A.Z.confirm({title:"\u786E\u8BA4\u64A4\u5355",content:"\u786E\u5B9A\u8981\u64A4\u9500\u8BA2\u5355 ".concat(t," \u5417\uFF1F"),onOk:function(){var a=g()(h()().mark(function je(){var f,C,Q;return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,(0,v.sl)({orderNo:t});case 3:f=d.sent,f.data===!0?(o.ZP.success("\u64A4\u5355\u6210\u529F"),(C=E.current)===null||C===void 0||C.reload()):(Q=(f==null?void 0:f.errorMessage)||(f==null?void 0:f.message)||"\u64A4\u5355\u5931\u8D25",o.ZP.error(Q)),d.next=11;break;case 7:d.prev=7,d.t0=d.catch(0),o.ZP.error("\u64A4\u5355\u8BF7\u6C42\u5931\u8D25"),console.error("\u64A4\u5355\u9519\u8BEF:",d.t0);case 11:case"end":return d.stop()}},je,null,[[0,7]])}));function m(){return a.apply(this,arguments)}return m}()});case 1:case"end":return s.stop()}},r)}));return function(t){return n.apply(this,arguments)}}(),G=function(r){if(I.length===0){o.ZP.warning("\u8BF7\u9009\u62E9\u4EA4\u6613\u725B\u725B\u53F7");return}U(r),S(!0)},Pe=function(){var n=g()(h()().mark(function r(t){var l;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,v.bk)({accounts:I.map(function(m){return m.account}),code:t.code,number:t.qty,orderType:t.orderType==="market"?2:1,trdSide:j==="buy"?1:2,price:t.orderType==="limit"?t.price:void 0,sellTriggerType:t.autoSell&&t.sellTriggerType?t.sellTriggerType:void 0,sellTriggerValue:t.autoSell&&t.sellTriggerValue?t.sellTriggerValue:void 0,timeForce:t.timeForce?1:0});case 3:l=a.sent,l.data?(o.ZP.success("\u4EA4\u6613\u6307\u4EE4\u5DF2\u53D1\u9001"),S(!1),T.resetFields()):o.ZP.error("\u4EA4\u6613\u5931\u8D25"),setTimeout(function(){E.current&&E.current.reload()},200),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),o.ZP.error("\u4EA4\u6613\u5931\u8D25"),setTimeout(function(){E.current&&E.current.reload()},200);case 12:case"end":return a.stop()}},r,null,[[0,8]])}));return function(t){return n.apply(this,arguments)}}(),Ie=function(){var n=g()(h()().mark(function r(t){var l;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return K(t),w(!0),N(!0),a.prev=3,a.next=6,(0,v.N9)({account:t});case 6:l=a.sent,l.data?W(l.data):o.ZP.error("\u83B7\u53D6\u6301\u4ED3\u6570\u636E\u5931\u8D25"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),o.ZP.error("\u83B7\u53D6\u6301\u4ED3\u6570\u636E\u5931\u8D25");case 13:return a.prev=13,N(!1),a.finish(13);case 16:case"end":return a.stop()}},r,null,[[3,10,13,16]])}));return function(t){return n.apply(this,arguments)}}(),$=function(r,t){if(!x){o.ZP.warning("\u725B\u725B\u53F7\u4FE1\u606F\u4E0D\u5B58\u5728");return}U(r),b([{account:x}]),S(!0),T.setFieldValue("code",t)},Se=[{title:"\u80A1\u7968\u4EE3\u7801",dataIndex:"code",key:"code"},{title:"\u6301\u4ED3\u65B9\u5411",dataIndex:"positionSide",key:"positionSide",render:function(r){var t=r===0?"#52c41a":"#ff4d4f",l=r===0?"\u591A\u4ED3":"\u7A7A\u4ED3";return(0,e.jsx)("span",{style:{color:t},children:l})}},{title:"\u6301\u4ED3\u6570\u91CF",dataIndex:"qty",key:"qty"},{title:"\u53EF\u7528\u6570\u91CF",dataIndex:"canSellQty",key:"canSellQty"},{title:"\u6210\u672C\u4EF7",dataIndex:"costPrice",key:"costPrice",render:function(r){return r==null?void 0:r.toFixed(2)}},{title:"\u5F53\u524D\u4EF7",dataIndex:"price",key:"price",render:function(r){return r==null?void 0:r.toFixed(2)}},{title:"\u6301\u4ED3\u5E02\u503C",dataIndex:"val",key:"val",render:function(r){return r==null?void 0:r.toFixed(2)}},{title:"\u76C8\u4E8F\u6BD4\u4F8B",dataIndex:"plRatio",key:"plRatio",render:function(r){var t=r>=0?"#52c41a":"#ff4d4f";return(0,e.jsxs)("span",{style:{color:t},children:[(r*100).toFixed(2),"%"]})}},{title:"\u64CD\u4F5C",key:"action",render:function(r,t){return(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(p.ZP,{type:"primary",size:"small",onClick:function(){return $("buy",t.code)},children:"\u4E70\u5165"}),(0,e.jsx)(p.ZP,{type:"primary",danger:!0,size:"small",onClick:function(){return $("sell",t.code)},children:"\u5356\u51FA"})]})}}];return(0,e.jsxs)(Y._z,{children:[(0,e.jsx)(F.Z,{headerTitle:"\u8D26\u6237\u5217\u8868",rowKey:"id",search:{labelWidth:120},options:!1,params:{enable:!0},request:v.Ug,columns:xe,pagination:{defaultPageSize:100,showSizeChanger:!0,pageSizeOptions:["100","200","500"]},rowSelection:{selectedRowKeys:ue,onChange:function(r,t){le(r),b(t)}},toolBarRender:function(){return[(0,e.jsx)(p.ZP,{type:"primary",onClick:function(){return G("buy")},disabled:I.length===0,children:"\u4E70\u5165"},"buy"),(0,e.jsx)(p.ZP,{danger:!0,onClick:function(){return G("sell")},disabled:I.length===0,children:"\u5356\u51FA"},"sell")]}}),(0,e.jsx)(ee.Z,{style:{margin:"5px 0"}}),(0,e.jsx)(F.Z,{headerTitle:"\u8BA2\u5355\u5217\u8868",actionRef:E,rowKey:"orderNo",search:{labelWidth:120},request:v.MG,columns:Te,options:{reload:!0},revalidateOnFocus:!0}),(0,e.jsxs)(A.Z,{title:"".concat(j==="buy"?"\u4E70\u5165":"\u5356\u51FA","\u4EA4\u6613"),open:de,onCancel:function(){S(!1),T.resetFields()},footer:null,width:600,zIndex:1001,children:[!x&&(0,e.jsx)("div",{style:{marginBottom:16,display:"flex",flexWrap:"wrap",gap:8},children:[{code:"AAPL",name:"\u82F9\u679C"},{code:"NVDA",name:"\u82F1\u4F1F\u8FBE"},{code:"META",name:"Meta"},{code:"MSFT",name:"\u5FAE\u8F6F"},{code:"AMZN",name:"\u4E9A\u9A6C\u900A"},{code:"GOOGL",name:"\u8C37\u6B4C"},{code:"TSLA",name:"\u7279\u65AF\u62C9"},{code:"AVGO",name:"\u535A\u901A"},{code:"CRWD",name:"CrowdStrike"},{code:"TSM",name:"\u53F0\u79EF\u7535"}].map(function(n){return(0,e.jsxs)(p.ZP,{size:"small",onClick:function(){return T.setFieldValue("code",n.code)},children:[n.code,"(",n.name,")"]},n.code)})}),(0,e.jsxs)(i.Z,{form:T,onFinish:Pe,layout:"vertical",children:[(0,e.jsx)(i.Z.Item,{name:"code",label:"\u80A1\u7968\u4EE3\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u80A1\u7968\u4EE3\u7801"}],children:(0,e.jsx)(te.Z,{placeholder:"\u8BF7\u8F93\u5165\u80A1\u7968\u4EE3\u7801",disabled:!!x})}),(0,e.jsx)(i.Z.Item,{name:"qty",label:"\u4EA4\u6613\u6570\u91CF",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA4\u6613\u6570\u91CF"}],children:(0,e.jsx)(P.Z,{min:1,placeholder:"\u8BF7\u8F93\u5165\u4EA4\u6613\u6570\u91CF",style:{width:"100%"}})}),(0,e.jsx)(i.Z.Item,{name:"orderType",label:"\u8BA2\u5355\u7C7B\u578B",initialValue:"market",children:(0,e.jsxs)(y.ZP.Group,{children:[(0,e.jsx)(y.ZP,{value:"market",children:"\u5E02\u4EF7\u5355"}),(0,e.jsx)(y.ZP,{value:"limit",children:"\u9650\u4EF7\u5355"})]})}),(0,e.jsx)(i.Z.Item,{name:"timeForce",valuePropName:"checked",initialValue:!1,children:(0,e.jsx)(M.Z,{children:"\u64A4\u5355\u6709\u6548"})}),(0,e.jsx)(i.Z.Item,{noStyle:!0,shouldUpdate:function(r,t){return r.orderType!==t.orderType},children:function(r){var t=r.getFieldValue;return t("orderType")==="limit"?(0,e.jsx)(i.Z.Item,{name:"price",label:"\u4EF7\u683C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EF7\u683C"}],children:(0,e.jsx)(P.Z,{min:0,step:.01,placeholder:"\u8BF7\u8F93\u5165\u4EF7\u683C",style:{width:"100%"}})}):null}}),j==="buy"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z.Item,{name:"autoSell",valuePropName:"checked",initialValue:!0,children:(0,e.jsx)(M.Z,{children:"\u5168\u90E8\u6210\u4EA4\u540E\u81EA\u52A8\u6302\u5356\u5355"})}),(0,e.jsx)(i.Z.Item,{noStyle:!0,shouldUpdate:function(r,t){return r.autoSell!==t.autoSell},children:function(r){var t=r.getFieldValue;return t("autoSell")?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z.Item,{name:"sellTriggerType",label:"\u5356\u5355\u89C4\u5219",initialValue:"percentage",children:(0,e.jsxs)(y.ZP.Group,{children:[(0,e.jsx)(y.ZP,{value:"percentage",children:"\u6309\u4E0A\u6DA8\u5E45\u5EA6"}),(0,e.jsx)(y.ZP,{value:"amount",children:"\u6309\u4E0A\u6DA8\u91D1\u989D"}),(0,e.jsx)(y.ZP,{value:"limit",children:"\u9650\u4EF7\u5356\u51FA"})]})}),(0,e.jsx)(i.Z.Item,{noStyle:!0,shouldUpdate:function(s,a){return s.sellTriggerType!==a.sellTriggerType},children:function(s){var a=s.getFieldValue,m=a("sellTriggerType");return m==="limit"?(0,e.jsx)(i.Z.Item,{name:"sellTriggerValue",label:"\u5356\u51FA\u4EF7\u683C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5356\u51FA\u4EF7\u683C"}],children:(0,e.jsx)(P.Z,{min:0,step:.01,placeholder:"\u8BF7\u8F93\u5165\u5356\u51FA\u4EF7\u683C",style:{width:"100%"}})}):(0,e.jsx)(i.Z.Item,{name:"sellTriggerValue",label:m==="percentage"?"\u4E0A\u6DA8\u5E45\u5EA6(%)":"\u4E0A\u6DA8\u91D1\u989D($)",initialValue:.5,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89E6\u53D1\u503C"}],children:(0,e.jsx)(P.Z,{min:0,step:.1,placeholder:"\u8BF7\u8F93\u5165".concat(m==="percentage"?"\u4E0A\u6DA8\u5E45\u5EA6":"\u4E0A\u6DA8\u6BD4\u4F8B"),style:{width:"100%"}})})}})]}):null}})]}),(0,e.jsx)(i.Z.Item,{children:(0,e.jsxs)(p.ZP,{type:"primary",htmlType:"submit",block:!0,children:["\u786E\u8BA4",j==="buy"?"\u4E70\u5165":"\u5356\u51FA"]})})]})]}),(0,e.jsx)(A.Z,{title:"\u725B\u725B\u53F7".concat(x,"\u6301\u4ED3\u4FE1\u606F"),open:_e,onCancel:function(){w(!1),W([]),K(void 0)},footer:null,width:1e3,zIndex:1e3,children:(0,e.jsx)(re.Z,{columns:Se,dataSource:pe,rowKey:"code",loading:ye,pagination:!1})})]})};D.default=ne}}]);
