"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[181],{6331:function(Me,v,t){t.r(v);var F=t(97857),f=t.n(F),Y=t(15009),m=t.n(Y),Z=t(19632),D=t.n(Z),N=t(99289),g=t.n(N),x=t(5574),l=t.n(x),G=t(90930),P=t(94272),u=t(67294),z=t(80652),H=t(22396),M=t(2453),$=t(4393),w=t(78957),J=t(74656),Q=t(27484),i=t.n(Q),n=t(85893),V=H.default.RangePicker,b=500,X=function(){var q=(0,u.useState)({}),O=l()(q,2),ee=O[0],te=O[1],ae=(0,u.useState)(null),j=l()(ae,2),d=j[0],A=j[1],_e=(0,u.useState)([]),C=l()(_e,2),se=C[0],S=C[1],re=(0,u.useState)([]),B=l()(re,2),h=B[0],ue=B[1],ne=(0,u.useState)(!1),T=l()(ne,2),U=T[0],R=T[1],oe=(0,u.useState)(1),L=l()(oe,2),le=L[0],I=L[1],ce=(0,u.useState)(0),W=l()(ce,2),ie=W[0],de=W[1],fe=(0,u.useState)(""),K=l()(fe,2),me=K[0],De=K[1],E=function(){var s=g()(m()().mark(function e(){var r,o,a,c=arguments;return m()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return r=c.length>0&&c[0]!==void 0?c[0]:1,o=c.length>1?c[1]:void 0,_.prev=2,R(!0),_.next=6,(0,P.request)("/api/accountInfo/list",{params:{current:r,pageSize:b,name:o}});case 6:a=_.sent,a.success&&(S(r===1?a.data||[]:function(p){return[].concat(D()(p),D()(a.data||[]))}),de(a.total||0)),_.next=14;break;case 10:_.prev=10,_.t0=_.catch(2),console.error("\u83B7\u53D6\u8D26\u6237\u5217\u8868\u5931\u8D25:",_.t0),M.ZP.error("\u83B7\u53D6\u8D26\u6237\u5217\u8868\u5931\u8D25");case 14:return _.prev=14,R(!1),_.finish(14);case 17:case"end":return _.stop()}},e,null,[[2,10,14,17]])}));return function(){return s.apply(this,arguments)}}(),he=function(e){var r=e.target,o=r;if(o.scrollHeight-o.scrollTop-o.clientHeight<50){var a=le+1,c=Math.ceil(ie/b);a<=c&&!U&&(I(a),E(a,me))}},Ee=function(e){De(e),I(1),E(1,e)},k=function(){var s=g()(m()().mark(function e(){var r;return m()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,P.request)("/api/accountInfo/profit",{params:f()(f()({},d?{startTime:d[0].format("YYYY-MM-DD"),endTime:d[1].format("YYYY-MM-DD")}:{}),{},{accounts:h.join(",")})});case 3:r=a.sent,r.success&&te(r.data||{}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),console.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25:",a.t0),M.ZP.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25");case 11:case"end":return a.stop()}},e,null,[[0,7]])}));return function(){return s.apply(this,arguments)}}();(0,u.useEffect)(function(){E(1),k()},[]),(0,u.useEffect)(function(){k()},[d,h]);var pe=function(){var e=[];return Object.entries(ee).forEach(function(r){var o=l()(r,2),a=o[0],c=o[1],y=D()(c).sort(function(_,p){return i()(_.date).valueOf()-i()(p.date).valueOf()});y.forEach(function(_){e.push({account:a,date:_.date,profitPercentage:_.profitPercentage})})}),e},ve={data:pe(),xField:"date",yField:"profitPercentage",seriesField:"account",xAxis:{type:"time",label:{formatter:function(e){return i()(e).format("MM-DD")}},tickCount:10},yAxis:{label:{formatter:function(e){return"".concat(Number(e).toFixed(2),"%")}}},tooltip:{formatter:function(e){return{name:e.account,value:"".concat(Number(e.profitPercentage).toFixed(2),"%"),title:i()(e.date).format("YYYY-MM-DD")}}},legend:{position:"top"},smooth:!0,connectNulls:!0,animation:{appear:{animation:"path-in",duration:1e3}}},ge=function(e){return e&&e>i()().endOf("day")},Pe=function(e,r){A(e?[e[0],e[1]]:null)};return(0,n.jsxs)(G._z,{children:[(0,n.jsxs)("div",{style:{marginBottom:16,padding:"16px 24px",background:"#f5f5f5",borderRadius:"4px"},children:[(0,n.jsx)("p",{style:{marginBottom:8,fontWeight:"bold"},children:"\u6570\u636E\u8BF4\u660E\uFF1A"}),(0,n.jsx)("p",{style:{marginBottom:8,paddingLeft:16},children:"1. \u76C8\u5229\u6BD4\u4F8B = (\u5F53\u524D\u8D44\u91D1 - \u521D\u59CB\u8D44\u91D1) / \u521D\u59CB\u8D44\u91D1 * 100%"}),(0,n.jsx)("p",{style:{marginBottom:8,paddingLeft:16},children:"2. \u5F53\u524D\u8D44\u91D1\u5305\u542B\u73B0\u91D1\u548C\u6240\u6709\u6301\u4ED3\u80A1\u7968\u7684\u5E02\u503C"})]}),(0,n.jsx)($.Z,{title:"\u8D26\u6237\u76C8\u5229\u8D8B\u52BF",bordered:!1,extra:(0,n.jsxs)(w.Z,{children:[(0,n.jsx)(J.Z,{placeholder:"\u9009\u62E9\u8D26\u6237",mode:"multiple",allowClear:!0,showSearch:!0,style:{width:300},options:se.map(function(s){return{label:"".concat(s.name," (").concat(s.account,")"),value:s.account}}),value:h,onChange:ue,loading:U,onPopupScroll:he,maxTagCount:"responsive",onSearch:Ee,filterOption:!1}),(0,n.jsx)(V,{value:d,onChange:Pe,disabledDate:ge,allowClear:!0,placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"]})]}),children:(0,n.jsx)(z.Z,f()(f()({},ve),{},{height:400}))})]})};v.default=X}}]);
